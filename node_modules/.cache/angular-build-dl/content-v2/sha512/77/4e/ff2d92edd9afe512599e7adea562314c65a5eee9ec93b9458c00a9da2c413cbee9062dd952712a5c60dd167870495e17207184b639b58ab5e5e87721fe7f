{"version":3,"sources":["src/app/modules/agencies/agencies-list/agencies-list.component.html","src/app/modules/agencies/agency-card/agency-card.component.html","src/app/modules/agencies/agency-details/agency-details.component.html","src/app/modules/agencies/agencies-list/agencies-list.component.scss","src/app/modules/agencies/agencies-list/agencies-list.component.ts","src/app/modules/agencies/agencies-routing.module.ts","src/app/modules/agencies/agencies.module.ts","src/app/modules/agencies/agency-card/agency-card.component.scss","src/app/modules/agencies/agency-card/agency-card.component.ts","src/app/modules/agencies/agency-details/agency-details.component.scss","src/app/modules/agencies/agency-details/agency-details.component.ts","src/app/modules/core/data.service.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<p>agency-list works!</p>\\n<mat-card class=\\\"agency-card\\\">\\n    <mat-card-header>\\n      <div mat-card-avatar class=\\\"agency-header-image\\\"></div>\\n      <mat-card-title>Shiba Inu</mat-card-title>\\n      <mat-card-subtitle>Dog Breed</mat-card-subtitle>\\n    </mat-card-header>\\n  </mat-card>\\n\\n  <div *ngIf=\\\"agencies$ | async as agencies; else notFound\\\">\\n    <app-note-card *ngFor=\\\"let agency of agencies\\\" [routerLink]=\\\"['/agencies', agency.id]\\\">\\n    </app-note-card>\\n  </div>\\n  <ng-template #notFound>\\n    <mat-card>\\n      <mat-card-title>\\n        Either you have no agencies\\n      </mat-card-title>\\n    </mat-card>\\n  </ng-template>\"","export default \"<mat-card>\\n    <mat-card-title>{{ agency.agencia }}</mat-card-title>\\n    <mat-card-subtitle>{{ agency.provincia }}</mat-card-subtitle>\\n    <mat-card-content>{{ agency.direccion }}</mat-card-content>\\n  </mat-card>\\n\"","export default \"<p>agency-details works!</p>\\n\"","export default \".space-between {\\n  -webkit-box-flex: 1;\\n          flex: 1;\\n}\\n\\n.agency-header-image {\\n  background-image: url(\\\"/assets/img/agencia1.jpg\\\");\\n  background-size: cover;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWdkYWp1YXJlei9EZXNrdG9wL3NvdXJjZV9jb2RlL2JjcHRlc3RhcHAvc3JjL2FwcC9tb2R1bGVzL2FnZW5jaWVzL2FnZW5jaWVzLWxpc3QvYWdlbmNpZXMtbGlzdC5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvbW9kdWxlcy9hZ2VuY2llcy9hZ2VuY2llcy1saXN0L2FnZW5jaWVzLWxpc3QuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxtQkFBQTtVQUFBLE9BQUE7QUNDSjs7QURFQTtFQUNJLGlEQUFBO0VBQ0Esc0JBQUE7QUNDSiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvYWdlbmNpZXMvYWdlbmNpZXMtbGlzdC9hZ2VuY2llcy1saXN0LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnNwYWNlLWJldHdlZW4ge1xuICAgIGZsZXg6MTtcbn1cblxuLmFnZW5jeS1oZWFkZXItaW1hZ2Uge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnL2Fzc2V0cy9pbWcvYWdlbmNpYTEuanBnJyk7XG4gICAgYmFja2dyb3VuZC1zaXplOiBjb3Zlcjtcbn0iLCIuc3BhY2UtYmV0d2VlbiB7XG4gIGZsZXg6IDE7XG59XG5cbi5hZ2VuY3ktaGVhZGVyLWltYWdlIHtcbiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiL2Fzc2V0cy9pbWcvYWdlbmNpYTEuanBnXCIpO1xuICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { DataService } from '../../core/data.service';\nimport { Observable } from 'rxjs';\n\ninterface Agency{\n  id:string;\n  agencia:string;\n  distrito:string;\n  provincia:string;\n  departamento:string;\n  direccion:string;\n  lat:number;\n  lon:number;\n}\n\n@Component({\n  selector: 'app-agencies-list',\n  templateUrl: './agencies-list.component.html',\n  styleUrls: ['./agencies-list.component.scss']\n})\n\nexport class AgenciesListComponent implements OnInit {\n\n  agencies$: Observable<Agency[]>;\n  isDbLoading$;\n  constructor(private db: DataService) { \n \n  }\n\n  ngOnInit() {\n    this.agencies$ = this.db.getAgencies();\n    this.isDbLoading$ = this.db.isLoading$;\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { AgenciesListComponent } from './agencies-list/agencies-list.component';\nimport { AgencyDetailsComponent } from './agency-details/agency-details.component';\n\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    component: AgenciesListComponent\n  }, \n  {\n    path: \":id\",\n    component: AgencyDetailsComponent\n}\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AgenciesRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { AgenciesRoutingModule } from './agencies-routing.module';\nimport { AgenciesListComponent } from './agencies-list/agencies-list.component';\nimport { AgencyDetailsComponent } from './agency-details/agency-details.component';\nimport { SharedModule } from '../shared/shared.module';\nimport { AgencyCardComponent } from './agency-card/agency-card.component';\n\n\n@NgModule({\n  declarations: [\n    AgenciesListComponent, \n    AgencyDetailsComponent, \n    AgencyCardComponent\n  ],\n  imports: [\n    CommonModule,\n    AgenciesRoutingModule,\n    SharedModule   \n  ]\n})\nexport class AgenciesModule { }\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvYWdlbmNpZXMvYWdlbmN5LWNhcmQvYWdlbmN5LWNhcmQuY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-agency-card',\n  templateUrl: './agency-card.component.html',\n  styleUrls: ['./agency-card.component.scss']\n})\nexport class AgencyCardComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvYWdlbmNpZXMvYWdlbmN5LWRldGFpbHMvYWdlbmN5LWRldGFpbHMuY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-agency-details',\n  templateUrl: './agency-details.component.html',\n  styleUrls: ['./agency-details.component.scss']\n})\nexport class AgencyDetailsComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Injectable } from \"@angular/core\";\nimport { AngularFirestore } from \"@angular/fire/firestore\";\nimport { Observable, throwError, BehaviorSubject } from \"rxjs\";\nimport { catchError, tap, map } from \"rxjs/operators\";\n\ninterface Agency{\n  agencia:string;\n  distrito:string;\n  provincia:string;\n  departamento:string;\n  direccion:string;\n  lat:number;\n  lon:number;\n}\n\n\n@Injectable({\n  providedIn: \"root\"\n})\nexport class DataService {\n  protected readonly AGENCIES_COLLECTION = \"agencies\";\n  public isLoading$ = new BehaviorSubject<boolean>(true);\n\n  get timestamp() {\n    return new Date().getTime();\n  }\n\n  constructor(private afDb: AngularFirestore) {}\n\n  getAgenciesCollection(){\n    return this.afDb.collection(\n      this.AGENCIES_COLLECTION, ref => ref.orderBy(\"updated_at\"));\n  }\n\n  getAgencies(): Observable<any> {\n    return this.getAgenciesCollection()\n      .snapshotChanges()\n      .pipe(\n        map(snapshot =>\n          snapshot.map(a => {\n            //Get document data\n            const data = a.payload.doc.data() as Agency;\n            //Get document id\n            const id = a.payload.doc.id;\n            //Use spread operator to add the id to the document data\n            return { id, ...data };\n          })\n        ),\n        tap(notes => {\n          this.isLoading$.next(false);\n        }),\n        catchError(e => throwError(e))\n      );\n  }  \n\n  editAgency(id, data): Promise<void> {\n    return this.getAgenciesCollection()\n      .doc(id)\n      .update({\n        ...data,\n        updated_at: this.timestamp\n      });\n  }\n\n  getAgency(id): Observable<any> {\n    return this.getAgenciesCollection()\n      .doc(id)\n      .snapshotChanges()\n      .pipe(\n        map(snapshot => {\n          const data = snapshot.payload.data() as Agency;\n          const id = snapshot.payload.id;\n          return { id, ...data };\n        }),\n        catchError(e => throwError(e))\n      );\n  }\n\n}\n"],"sourceRoot":"webpack:///","file":"modules-agencies-agencies-module-es5.js"}