{"version":3,"sources":["./src/app/modules/agencies/agencies-list/agencies-list.component.html","./src/app/modules/agencies/agency-details/agency-details.component.html","./src/app/modules/agencies/agencies-list/agencies-list.component.scss","./src/app/modules/agencies/agencies-list/agencies-list.component.ts","./src/app/modules/agencies/agencies-routing.module.ts","./src/app/modules/agencies/agencies.module.ts","./src/app/modules/agencies/agency-details/agency-details.component.scss","./src/app/modules/agencies/agency-details/agency-details.component.ts","./src/app/modules/core/data.service.ts"],"names":[],"mappings":"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","file":"modules-agencies-agencies-module-es2015.js","sourcesContent":["export default \"<p>agency-list works!</p>\\n<mat-card class=\\\"agency-card\\\">\\n    <mat-card-header>\\n      <div mat-card-avatar class=\\\"agency-header-image\\\"></div>\\n      <mat-card-title>Shiba Inu</mat-card-title>\\n      <mat-card-subtitle>Dog Breed</mat-card-subtitle>\\n    </mat-card-header>\\n  </mat-card>\\n\\n  <div *ngIf=\\\"agencies$ | async as agencies; else notFound\\\">\\n    <app-note-card *ngFor=\\\"let agency of agencies\\\" [routerLink]=\\\"['/agencies', agency.id]\\\">\\n    </app-note-card>\\n  </div>\\n  <ng-template #notFound>\\n    <mat-card>\\n      <mat-card-title>\\n        Either you have no agencies\\n      </mat-card-title>\\n    </mat-card>\\n  </ng-template>\"","export default \"<p>agency-details works!</p>\\n\"","export default \".space-between {\\n  -webkit-box-flex: 1;\\n          flex: 1;\\n}\\n\\n.agency-header-image {\\n  background-image: url(\\\"/assets/img/agencia1.jpg\\\");\\n  background-size: cover;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWdkYWp1YXJlei9EZXNrdG9wL3NvdXJjZV9jb2RlL2JjcHRlc3RhcHAvc3JjL2FwcC9tb2R1bGVzL2FnZW5jaWVzL2FnZW5jaWVzLWxpc3QvYWdlbmNpZXMtbGlzdC5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvbW9kdWxlcy9hZ2VuY2llcy9hZ2VuY2llcy1saXN0L2FnZW5jaWVzLWxpc3QuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxtQkFBQTtVQUFBLE9BQUE7QUNDSjs7QURFQTtFQUNJLGlEQUFBO0VBQ0Esc0JBQUE7QUNDSiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvYWdlbmNpZXMvYWdlbmNpZXMtbGlzdC9hZ2VuY2llcy1saXN0LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnNwYWNlLWJldHdlZW4ge1xuICAgIGZsZXg6MTtcbn1cblxuLmFnZW5jeS1oZWFkZXItaW1hZ2Uge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnL2Fzc2V0cy9pbWcvYWdlbmNpYTEuanBnJyk7XG4gICAgYmFja2dyb3VuZC1zaXplOiBjb3Zlcjtcbn0iLCIuc3BhY2UtYmV0d2VlbiB7XG4gIGZsZXg6IDE7XG59XG5cbi5hZ2VuY3ktaGVhZGVyLWltYWdlIHtcbiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiL2Fzc2V0cy9pbWcvYWdlbmNpYTEuanBnXCIpO1xuICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { DataService } from '../../core/data.service';\nimport { Observable } from 'rxjs';\n\ninterface Agency{\n  id:string;\n  agencia:string;\n  distrito:string;\n  provincia:string;\n  departamento:string;\n  direccion:string;\n  lat:number;\n  lon:number;\n}\n\n@Component({\n  selector: 'app-agencies-list',\n  templateUrl: './agencies-list.component.html',\n  styleUrls: ['./agencies-list.component.scss']\n})\n\nexport class AgenciesListComponent implements OnInit {\n\n  agencies$: Observable<Agency[]>;\n  isDbLoading$;\n  constructor(private db: DataService) { \n \n  }\n\n  ngOnInit() {\n    this.agencies$ = this.db.getAgencies();\n    this.isDbLoading$ = this.db.isLoading$;\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { AgenciesListComponent } from './agencies-list/agencies-list.component';\nimport { AgencyDetailsComponent } from './agency-details/agency-details.component';\n\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    component: AgenciesListComponent\n  }, \n  {\n    path: \":id\",\n    component: AgencyDetailsComponent\n}\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AgenciesRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { AgenciesRoutingModule } from './agencies-routing.module';\nimport { AgenciesListComponent } from './agencies-list/agencies-list.component';\nimport { AgencyDetailsComponent } from './agency-details/agency-details.component';\nimport { SharedModule } from '../shared/shared.module';\n\n\n@NgModule({\n  declarations: [\n    AgenciesListComponent, \n    AgencyDetailsComponent\n  ],\n  imports: [\n    CommonModule,\n    AgenciesRoutingModule,\n    SharedModule   \n  ]\n})\nexport class AgenciesModule { }\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvYWdlbmNpZXMvYWdlbmN5LWRldGFpbHMvYWdlbmN5LWRldGFpbHMuY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-agency-details',\n  templateUrl: './agency-details.component.html',\n  styleUrls: ['./agency-details.component.scss']\n})\nexport class AgencyDetailsComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Injectable } from \"@angular/core\";\nimport { AngularFirestore } from \"@angular/fire/firestore\";\nimport { Observable, throwError, BehaviorSubject } from \"rxjs\";\nimport { catchError, tap, map } from \"rxjs/operators\";\n\ninterface Agency{\n  agencia:string;\n  distrito:string;\n  provincia:string;\n  departamento:string;\n  direccion:string;\n  lat:number;\n  lon:number;\n}\n\n\n@Injectable({\n  providedIn: \"root\"\n})\nexport class DataService {\n  protected readonly AGENCIES_COLLECTION = \"agencies\";\n  public isLoading$ = new BehaviorSubject<boolean>(true);\n\n  get timestamp() {\n    return new Date().getTime();\n  }\n\n  constructor(private afDb: AngularFirestore) {}\n\n  getAgenciesCollection(){\n    return this.afDb.collection(\n      this.AGENCIES_COLLECTION, ref => ref.orderBy(\"updated_at\"));\n  }\n\n  getAgencies(): Observable<any> {\n    return this.getAgenciesCollection()\n      .snapshotChanges()\n      .pipe(\n        map(snapshot =>\n          snapshot.map(a => {\n            //Get document data\n            const data = a.payload.doc.data() as Agency;\n            //Get document id\n            const id = a.payload.doc.id;\n            //Use spread operator to add the id to the document data\n            return { id, ...data };\n          })\n        ),\n        tap(notes => {\n          this.isLoading$.next(false);\n        }),\n        catchError(e => throwError(e))\n      );\n  }  \n\n  editAgency(id, data): Promise<void> {\n    return this.getAgenciesCollection()\n      .doc(id)\n      .update({\n        ...data,\n        updated_at: this.timestamp\n      });\n  }\n\n  getAgency(id): Observable<any> {\n    return this.getAgenciesCollection()\n      .doc(id)\n      .snapshotChanges()\n      .pipe(\n        map(snapshot => {\n          const data = snapshot.payload.data() as Agency;\n          const id = snapshot.payload.id;\n          return { id, ...data };\n        }),\n        catchError(e => throwError(e))\n      );\n  }\n\n}\n"],"sourceRoot":"webpack:///"}